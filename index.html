<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FlowSeat | Event Seating Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell" data-auth-app data-left-state="expanded">
      <aside class="sidebar">
        <button
          class="panel-toggle panel-toggle--left"
          data-action="toggleLeftPanel"
          aria-label="Collapse sidebar"
          aria-expanded="true"
        >
          <span class="material-symbol">chevron_left</span>
        </button>
        <div class="sidebar__content">
          <button class="sidebar-toggle" data-action="closeSidebar">
            <span class="material-symbol">close</span>
          </button>
          <div class="brand">
            <div class="brand-mark">FS</div>
            <div class="brand-copy">
              <h1>FlowSeat</h1>
              <p>Smart event seating, in sync.</p>
            </div>
          </div>

          <div class="event-switcher">
            <form class="event-form" id="eventForm">
                  <label class="field">
                    <span>Event name</span>
                    <input
                      type="text"
                      id="eventName"
                      placeholder="Autumn Gala 2025"
                      required
                    />
                  </label>
                  <label class="field">
                    <span>Date & time</span>
                    <div class="datetime-picker with-helper">
                      <input type="datetime-local" id="eventDate" class="datetime-picker__native" required />
                      <button
                        type="button"
                        class="datetime-picker__display"
                        id="eventDateTrigger"
                        aria-label="Choose date and time"
                      >
                        <span class="datetime-picker__value" id="eventDateDisplay">Select date & time</span>
                        <span class="material-symbol">calendar_month</span>
                      </button>
                      <span class="field-helper">* Required</span>
                    </div>
                  </label>
                  <label class="field">
                    <span>Venue</span>
                    <input
                      type="text"
                      id="eventVenue"
                      placeholder="Skyline Ballroom"
                    />
                  </label>
                  <label class="field">
                    <span>Capacity</span>
                    <div class="numeric-stepper">
                      <button
                        type="button"
                        class="stepper-button"
                        data-capacity-step="-1"
                        aria-label="Decrease capacity"
                      >
                        ‚àí
                      </button>
                      <input
                        type="number"
                        id="eventCapacity"
                        min="1"
                        value="120"
                        data-default="120"
                        inputmode="numeric"
                        required
                      />
                      <button
                        type="button"
                        class="stepper-button"
                        data-capacity-step="1"
                        aria-label="Increase capacity"
                      >
                        +
                      </button>
                    </div>
                  </label>
                  <button class="primary" type="submit">Create plan</button>
                <button class="ghost destructive" type="button" id="deleteAllEvents">Delete all plans</button>
            </form>

            <div class="event-list" id="eventList"></div>
          </div>

          <div class="legend">
            <h2>Seat legend</h2>
            <ul>
              <li><span class="dot status-open"></span> Available</li>
              <li><span class="dot status-held"></span> Reserved</li>
              <li><span class="dot status-occupied"></span> Seated</li>
              <li><span class="dot status-vip"></span> VIP</li>
              <li><span class="dot status-blocked"></span> Blocked</li>
            </ul>
          </div>

          <div class="sync-status" id="syncStatus">
            <div class="pulse"></div>
            <span>Offline draft</span>
          </div>
        </div>
      </aside>

      <main class="workspace">
        <header class="workspace-header">
          <button class="sidebar-toggle ghost" data-action="openSidebar">
            <span class="material-symbol">menu</span>
          </button>
          <div class="breadcrumbs">
            <span>Events</span>
            <span class="divider">/</span>
            <span id="currentEventName">No event selected</span>
          </div>
          <div class="header-actions">
            <div class="intent-toggles" role="toolbar">
              <button class="chip publish-trigger" id="openPublishModal" type="button">
                Publish
              </button>
              <button class="chip active" data-intent="layout">
                Layout
              </button>
              <button class="chip" data-intent="assignments">
                Live data
              </button>
            </div>
        <button class="ghost logout-button" id="logoutButton">Log out</button>
          </div>
        </header>

        <section class="workspace-body" data-auth-guard data-zoom data-details-state="collapsed" data-intent="layout">
          <div class="canvas-wrapper" data-view="layout" aria-hidden="false">
            <div class="canvas-toolbar">
              <div class="library" role="toolbar">
                <button class="library-item active" data-tool="select" title="Select tool">
                  <span class="material-symbol">north_west</span>
                  <span>Select</span>
                </button>
                <button class="library-item" data-tool="seat" title="Place seat">
                  <span class="library-glyph">ü™ë</span>
                  <span>Seat</span>
                </button>
                <button class="library-item" data-tool="table" title="Place table">
                  <span class="library-glyph">üî≤</span>
                  <span>Table</span>
                </button>
                <button class="library-item" data-tool="sofa" title="Place sofa">
                  <span class="library-glyph">üõãÔ∏è</span>
                  <span>Sofa</span>
                </button>
                <button class="library-item" data-tool="stage" title="Place stage">
                  <span class="library-glyph">üé§</span>
                  <span>Stage</span>
                </button>
              </div>
              <div class="edit-toolbar" role="toolbar" aria-label="Element edit tools">
                <div class="edit-toolbar__rotate">
                  <label for="rotationAngleInput">Rotate</label>
                  <div class="edit-toolbar__rotate-controls">
                    <input
                      type="number"
                      id="rotationAngleInput"
                      min="0"
                      max="359"
                      value="0"
                      disabled
                    />
                    <button class="edit-item" data-edit-action="rotate" type="button" disabled>
                      <span class="material-symbol">refresh</span>
                      <span>Apply</span>
                    </button>
                    <button
                      class="edit-item"
                      data-edit-action="toggle-handle"
                      type="button"
                      aria-pressed="false"
                      disabled
                    >
                      <span class="material-symbol">adjust</span>
                      <span>Handle</span>
                    </button>
                  </div>
                </div>
                <div class="edit-toolbar__actions">
                  <button class="edit-item" data-edit-action="copy" type="button" disabled>
                    <span class="material-symbol">content_copy</span>
                    <span>Copy</span>
                  </button>
                  <button class="edit-item" data-edit-action="paste" type="button" disabled>
                    <span class="material-symbol">content_paste</span>
                    <span>Paste</span>
                  </button>
                  <button class="edit-item" data-edit-action="duplicate" type="button" disabled>
                    <span class="material-symbol">control_point_duplicate</span>
                    <span>Duplicate</span>
                  </button>
                  <button class="edit-item" data-edit-action="delete" type="button" disabled>
                    <span class="material-symbol">delete</span>
                    <span>Delete</span>
                  </button>
                  <button class="edit-item" data-edit-action="bring-front" type="button" disabled>
                    <span class="material-symbol">flip_to_front</span>
                    <span>Front</span>
                  </button>
                  <button class="edit-item" data-edit-action="send-back" type="button" disabled>
                    <span class="material-symbol">flip_to_back</span>
                    <span>Back</span>
                  </button>
                </div>
              </div>
              <div class="toolbar-group">
                <button class="icon-button" id="zoomOut" title="Zoom out" disabled>
                  <svg class="icon-button__glyph" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="11" cy="11" r="6.5" />
                    <line x1="8" y1="11" x2="14" y2="11" stroke-linecap="round" />
                    <line x1="15.8" y1="15.8" x2="20" y2="20" stroke-linecap="round" />
                  </svg>
                  <span class="sr-only">Zoom out</span>
                </button>
                <button class="icon-button" id="zoomReset" title="Reset zoom" disabled>
                  <svg class="icon-button__glyph" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="7" />
                    <line x1="12" y1="7" x2="12" y2="5" stroke-linecap="round" />
                    <line x1="12" y1="19" x2="12" y2="17" stroke-linecap="round" />
                    <line x1="7" y1="12" x2="5" y2="12" stroke-linecap="round" />
                    <line x1="19" y1="12" x2="17" y2="12" stroke-linecap="round" />
                    <circle cx="12" cy="12" r="2.5" />
                  </svg>
                  <span class="sr-only">Reset zoom</span>
                </button>
                <button class="icon-button" id="zoomIn" title="Zoom in" disabled>
                  <svg class="icon-button__glyph" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="11" cy="11" r="6.5" />
                    <line x1="11" y1="8" x2="11" y2="14" stroke-linecap="round" />
                    <line x1="8" y1="11" x2="14" y2="11" stroke-linecap="round" />
                    <line x1="15.8" y1="15.8" x2="20" y2="20" stroke-linecap="round" />
                  </svg>
                  <span class="sr-only">Zoom in</span>
                </button>
              </div>
            </div>

            <div
              class="assignments-panel"
              data-assignments-panel
              aria-hidden="true"
              aria-busy="false"
            >
              <header class="assignments-panel__header">
                <div>
                  <p class="assignments-panel__eyebrow">Live data</p>
                  <h2 class="assignments-panel__title">Live ticket sales</h2>
                </div>
                <span class="assignments-panel__updated" data-assignments-updated>‚Äî</span>
              </header>
              <div class="assignments-panel__event" data-assignments-event>
                <p class="muted">Select an event to monitor assignments.</p>
              </div>
              <section class="assignments-summary" data-assignments-summary></section>
              <section class="assignments-progress" data-assignments-progress></section>
              <section class="assignments-feed" aria-live="polite" aria-busy="false">
                <div class="assignments-feed__header">
                  <h3>Live feed</h3>
                  <button class="text-button" type="button" data-action="refreshAssignments">Refresh</button>
                </div>
                <div class="assignments-feed__list" data-assignments-feed>
                  <p class="muted">Recent activity will appear here once available.</p>
                </div>
              </section>
              <section class="assignments-map" data-assignments-map>
                <header class="assignments-map__header">
                  <div>
                    <h3>Live seat map</h3>
                    <p class="muted">Monitor live seat availability at a glance.</p>
                  </div>
                  <div class="assignments-map__stats" aria-label="Seat availability summary">
                    <span class="assignments-map__chip">
                      <span>Available</span>
                      <strong data-assignments-map-available>0</strong>
                    </span>
                    <span class="assignments-map__chip">
                      <span>Reserved</span>
                      <strong data-assignments-map-reserved>0</strong>
                    </span>
                    <span class="assignments-map__chip">
                      <span>Total</span>
                      <strong data-assignments-map-total>0</strong>
                    </span>
                  </div>
                </header>
                <div class="assignments-map__canvas">
                  <div class="assignments-map__frame" data-assignments-map-frame>
                    <canvas
                      id="assignmentsMapCanvas"
                      aria-label="Live seating layout overview"
                    ></canvas>
                    <div class="assignments-map__overlay" data-assignments-map-overlay>
                      Select an event to display the seating layout.
                    </div>
                  </div>
                  <p class="assignments-map__hint">Seat statuses refresh with every check-in update.</p>
                  <div class="assignments-map__legend" aria-hidden="true">
                    <span><span class="dot status-open"></span> Open</span>
                    <span><span class="dot status-held"></span> Reserved</span>
                    <span><span class="dot status-occupied"></span> Seated</span>
                    <span><span class="dot status-blocked"></span> Blocked</span>
                  </div>
                </div>
              </section>
            </div>

            <div class="canvas" id="seatingCanvas">
              <div class="canvas-viewport" data-viewport>
                <div class="canvas-stage" data-stage>
                  <div class="canvas-bounds" data-bounds></div>
                  <div class="canvas-scale" data-scale>
                    <div class="canvas-layer" data-layer></div>
                  </div>
                </div>
                <div class="empty-state" id="canvasEmpty">
                  <div class="empty-icon">üñ±Ô∏è</div>
                  <h2>Start placing furniture</h2>
                  <p>
                    Pick a seat, table, sofa, or stage from the palette above,
                    then click anywhere on the canvas to drop it. Drag to
                    reposition and use the rotate tool or inspector to fine-tune.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <aside class="details-panel is-collapsed" data-panel="details">
            <button class="panel-toggle panel-toggle--right" data-action="toggleRightPanel" aria-label="Expand details" aria-expanded="false">
              <span class="material-symbol">chevron_right</span>
            </button>
            <div class="details-panel__content">
              <div class="panel-section">
                <div class="section-header">
                  <h2>Guests</h2>
                  <button class="text-button" id="importGuests">Import CSV</button>
                </div>
                <div class="guest-list" id="guestList"></div>
              </div>

              <div class="panel-section" data-section="properties">
                <div class="section-header">
                  <h2>Element properties</h2>
                  <button class="text-button" id="clearSelection">Clear</button>
                  <button class="text-button" data-action="clearLayout">Clear layout</button>
                </div>
                <div class="seat-details" id="seatDetails">
                  <p class="muted">Select a furniture element to view its properties.</p>
                </div>
              </div>

              <div class="panel-section">
                <div class="section-header">
                  <h2>Automation</h2>
                </div>
                <div class="automation-controls">
                  <button class="secondary" id="balanceTables">Balance tables</button>
                </div>
              </div>
            </div>
          </aside>
        </section>
      </main>
    </div>

    <div class="toast-stack" id="toastStack"></div>

    <div class="context-menu" id="elementContextMenu" aria-hidden="true" role="menu"></div>

    <div
      class="login-overlay"
      id="loginOverlay"
      aria-hidden="false"
      role="dialog"
      aria-modal="true"
    >
      <div class="login-card" id="loginCard">
        <div class="login-headline">
          <div class="brand-mark">FS</div>
          <div>
            <h2>Welcome back</h2>
            <p class="muted">Sign in with Google to continue planning.</p>
          </div>
        </div>
        <div class="login-actions">
          <button class="primary google-button" id="googleLogin" type="button">
            <span class="material-symbol">account_circle</span>
            Continue with Google
          </button>
        </div>
        <p class="login-hint" id="loginHint" role="status"></p>
        <p class="login-error" id="loginError" role="alert"></p>
      </div>
    </div>

    <div class="modal" id="importModal" aria-hidden="true">
      <div class="modal-content">
        <header>
          <h2>Import guests</h2>
          <button class="icon-button" data-action="closeModal">
            <span class="material-symbol">close</span>
          </button>
        </header>
        <p>Upload a CSV file with columns for name, email, table, seat, tags.</p>
        <input type="file" id="importFile" accept=".csv" />
        <button class="primary" id="confirmImport">Upload</button>
      </div>
    </div>

    <div class="modal publish-modal" id="publishModal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header>
          <h2>Publish seating plan</h2>
          <button class="icon-button" data-action="closePublishModal" aria-label="Close publish preview">
            <span class="material-symbol">close</span>
          </button>
        </header>
        <div class="publish-modal__body">
          <div class="publish-preview" id="publishPreview">
            <div class="publish-preview__empty">Add seats to generate a preview.</div>
          </div>
          <div class="publish-summary">
            <div class="publish-summary__item">
              <span class="label">Event</span>
              <strong class="value" id="publishEventName">‚Äî</strong>
            </div>
            <div class="publish-summary__item">
              <span class="label">Date &amp; time</span>
              <strong class="value" id="publishEventDate">‚Äî</strong>
            </div>
            <div class="publish-summary__item">
              <span class="label">Venue</span>
              <strong class="value" id="publishEventVenue">‚Äî</strong>
            </div>
            <div class="publish-summary__item">
              <span class="label">Reserved seats</span>
              <strong class="value" id="publishEventReserved">0</strong>
            </div>
            <div class="publish-share">
              <div class="publish-share__label">
                <span class="label">Customer link</span>
                <button class="text-button" type="button" id="regenerateShareLink">Regenerate</button>
              </div>
              <div class="publish-share__controls">
                <input
                  type="text"
                  id="publishShareUrl"
                  class="publish-share__input"
                  readonly
                  value="Generating link..."
                  aria-label="Customer-facing plan URL"
                />
                <button class="icon-button" type="button" id="copyShareUrl" aria-label="Copy customer link">
                  <span class="material-symbol">content_copy</span>
                </button>
              </div>
              <p class="publish-share__status" id="publishShareStatus">Link not ready</p>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button class="ghost" data-action="closePublishModal">Cancel</button>
          <button class="primary" id="confirmPublish">Publish</button>
        </div>
      </div>
    </div>

    <div class="modal publish-confirm-modal" id="publishConfirmModal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header>
          <h2>Final confirmation</h2>
        </header>
        <p class="publish-confirmation-message">This will publish the seating plan and activate the customer link. Continue?</p>
        <div class="modal-actions">
          <button class="ghost" data-action="closePublishConfirm">Cancel</button>
          <button class="primary" id="finalizePublish">Confirm</button>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/party-js@latest/bundle/party.min.js"></script>
    <script src="config.js" defer></script>
    <script src="app.js" type="module"></script>
  </body>
</html>


